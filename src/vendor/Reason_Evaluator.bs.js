// Generated by BUCKLESCRIPT VERSION 4.0.0, PLEASE EDIT WITH CARE

import * as Block from "bs-platform/lib/es6/block.js";
import * as Curry from "bs-platform/lib/es6/curry.js";

var log = /* array */[];


  function proxy(context, method) {
    return function() {
      if (shouldRecordLog) {
        log.push(arguments[0]);
      }
      method.apply(context, Array.prototype.slice.apply(arguments))
    }
  }

  console.error = proxy(console, console.error)
  console.log = proxy(console, console.log)
  console.warning = proxy(console, console.warning)

;

var startRecord = (
  function () {
    shouldRecordLog = true
    log = []
  }
);

var stopRecord = (
  function () {
    shouldRecordLog = false
    log = []
  }
);

function execute(code) {
  Curry._1(startRecord, /* () */0);
  var result = evaluator.execute(code);
  var message = log.join("\n");
  Curry._1(stopRecord, /* () */0);
  if (result === "") {
    return /* Error */Block.__(1, [message]);
  } else {
    var match = message === "";
    return /* Ok */Block.__(0, [match ? result : message + ("\n" + result)]);
  }
}

var shouldRecordLog = false;

export {
  log ,
  shouldRecordLog ,
  startRecord ,
  stopRecord ,
  execute ,
  
}
/*  Not a pure module */
